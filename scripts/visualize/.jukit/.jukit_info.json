{"cmd": "from netCDF4 import Dataset\nimport matplotlib.pyplot as plt\nfrom glob import glob\nimport os\n\n#|%%--%%| <qRvm3W7rtE|ANDsNHSABv>\n\n# Change these values for different dirs\nroot_dir = \"../../results/\"\nmodel_dir = \"no-coriolis\"\n\n#|%%--%%| <ANDsNHSABv|twUyPhcMZb>\n\nall_files = sorted(glob(root_dir + model_dir + '/open/*'))\nfor i, fname in enumerate(all_files):\n    all_files[i] = os.path.basename(fname)\n\n#|%%--%%| <twUyPhcMZb|ilxS9sm3AN>\n\ndef save_image(image_data, fname, save_dir, title, clim = (-10, 10)):\n    plt.imshow(image_data, cmap='rainbow')\n    plt.clim(clim)\n    plt.colorbar()\n\n    date, time = fname.split('_')[-2:]\n\n    plt.title(f'{title} at\\n {date + '_' + time}')\n    plt.xlabel('x')\n    plt.ylabel('y')\n\n    plt.savefig(save_dir + fname)\n    plt.clf()\n\n#|%%--%%| <ilxS9sm3AN|R0hfTFSjVZ>\n\ndef save_images(files, get_data, save_dir, title, clim = (-10, 10)):\n    for fpath in files:\n        dataset = Dataset(fpath)\n        dataset_values = get_data(dataset)\n        save_image(\n            dataset_values,\n            os.path.basename(fpath),\n            save_dir,\n            title,\n            clim\n        )\n\n#|%%--%%| <R0hfTFSjVZ|bJj3ANs6zU>\n\ndef save_images_compare(files_1, files_2, get_data, save_dir, title, clim = (-10, 10)):\n    if (len(files_1) != len(files_2)):\n        raise ValueError('files_1 length does not match with files_2')\n\n    for i in range(len(files_1)):\n        fpath_1 = files_1[i]\n        fpath_2 = files_2[i]\n\n        dataset_1 = Dataset(fpath_1)\n        dataset_2 = Dataset(fpath_2)\n\n        dataset_1_values = get_data(dataset_1)\n        dataset_2_values = get_data(dataset_2)\n\n        diffs = dataset_1_values - dataset_2_values\n        save_image(\n            diffs,\n            os.path.basename(fpath_1),\n            save_dir,\n            title,\n            clim\n        )\n\n#|%%--%%| <bJj3ANs6zU|XncwnilMaf>\n\ndefault_results = glob(root_dir + 'default/periodic/*')\nno_coriolis_results = glob(root_dir + 'no-coriolis/periodic/*')\n\nsave_dir_new = root_dir + 'default/images/default-no-coriolis/'\n\ndef get_data(data):\n    return data['U'][0][0][:]\n\ntest_data_1 = Dataset(default_results[5])\ntest_data_2 = Dataset(no_coriolis_results[5])\n\ndiff = get_data(test_data_1) - get_data(test_data_2)\nprint(diff)\n\n# save_images(\n#     no_coriolis_results,\n#     get_data,\n#     save_dir_new,\n#     'Surface X-wind, No-Coriolis Real Model',\n#     (-20, 20)\n# )\n\n# save_images_compare(\n#     default_results,\n#     no_coriolis_results,\n#     get_data,\n#     save_dir_new,\n#     'Surface X-wind Difference, Default - No-Coriolis Real Model',\n#     (-1, 1)\n# )\n\n#|%%--%%| <XncwnilMaf|VUVW1yY1Au>\n\nimport numpy as np\n\ndef plot_mean():\n    means = []\n    labels = []\n\n    for fname in all_files[:-1]:\n        open_filepath = root_dir + model_dir + '/open/' + fname\n        open_dataset = Dataset(open_filepath)\n        mean_value = np.mean(open_dataset['U'][0][0][:])\n        mean_label = os.path.basename(fname).split('_')[-1]\n\n        means.append(mean_value)\n        labels.append(mean_label)\n\n    plt.title('Mean Wind Speed (x-direction) on Surface, No Coriolis')\n    plt.ylabel('U avg')\n    plt.xlabel('time')\n    plt.grid()\n    plt.xticks(np.arange(0, len(all_files), 60))\n    plt.plot(labels, means)\n    plt.savefig('result-graph.png')\n", "cmd_opts": " -s --md_cell_start=r\\\"\\\"\\\"°°°", "import_complete": 1, "terminal": "kitty"}